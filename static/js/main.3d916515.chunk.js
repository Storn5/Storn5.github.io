(this.webpackJsonpwebcontip=this.webpackJsonpwebcontip||[]).push([[0],{25:function(e,t,a){e.exports=a(39)},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(22),s=a.n(o),l=(a(30),a(31),a(32),a(23)),c=a(5),i=a(2),m=a(1),h=a(4),u=a(3),p=a(6),d=a.n(p),f=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleUsernameChange=function(e){n.setState({username:e.target.value})},n.handleEmailChange=function(e){n.setState({email:e.target.value})},n.handlePasswordChange=function(e){n.setState({password:e.target.value})},n.handleConfirmPasswordChange=function(e){n.setState({re_password:e.target.value})},n.handleBirthDateChange=function(e){n.setState({birthDate:e.target.value})},n.handleSubmit=function(e){if(n.state.password==n.state.re_password){alert("Success! Authenticate me!"),e.preventDefault();var t={method:"POST",body:JSON.stringify(n.state),headers:{Accept:"application/json","Content-Type":"application/json"}};fetch("http://localhost:8000/api/v1/account/users/",t).then((function(e){return 201!=e.status&&alert("Something went wrong"),e.json()}))}else alert("Error: Passwords do not match."),e.preventDefault()},n.state={email:"",username:"",password:"",re_password:""},n}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),"No Account? Create One!",r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("form",{onSubmit:this.handleSubmit,method:"POST"},r.a.createElement("input",{type:"text",value:this.state.username,onChange:this.handleUsernameChange,name:"text",className:"form-control",placeholder:"Username"}),r.a.createElement("input",{type:"email",value:this.state.email,onChange:this.handleEmailChange,name:"email",className:"form-control",placeholder:"Email"}),r.a.createElement("input",{type:"password",value:this.state.password,onChange:this.handlePasswordChange,name:"password",className:"form-control",placeholder:"Password"}),r.a.createElement("input",{type:"password",value:this.state.re_password,onChange:this.handleConfirmPasswordChange,name:"re-password",className:"form-control",placeholder:"Confirm Password"}),r.a.createElement("button",{type:"submit",className:"tm-btn"},"Sign Up")))}}]),a}(n.Component),g=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleUsernameChange=function(e){n.setState({username:e.target.value})},n.handlePasswordChange=function(e){n.setState({password:e.target.value})},n.handleSubmit=function(e){e.preventDefault();var t={method:"POST",body:JSON.stringify(n.state),headers:{Accept:"application/json","Content-Type":"application/json"}};fetch("http://localhost:8000/api/v1/auth/login/",t).then((function(e){return 200!=e.status?(alert("Wrong credentials!"),!1):(alert("Success! Logged in!"),e.json())})).then((function(e){e&&(localStorage.setItem("jwt access",e.access),localStorage.setItem("jwt refresh",e.refresh),n.props.history.push("/profile/"))}))},n.state={username:"",password:""},n}return Object(m.a)(a,null,[{key:"propTypes",get:function(){return{history:d.a.any}}}]),Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("main",null,r.a.createElement("header",{className:"row tm-welcome-section"},r.a.createElement("h2",{className:"col-12 text-center tm-section-title"},"Log In")),r.a.createElement("div",{className:"tm-section"},r.a.createElement("form",{onSubmit:this.handleSubmit,method:"POST"},r.a.createElement("input",{type:"text",value:this.state.username,onChange:this.handleUsernameChange,name:"text",className:"form-control",placeholder:"Username"}),r.a.createElement("input",{type:"password",value:this.state.password,onChange:this.handlePasswordChange,name:"password",className:"form-control",placeholder:"Password"}),r.a.createElement("button",{type:"submit",className:"tm-btn"},"Log In")),r.a.createElement(f,{history:this.props.history})))}}]),a}(n.Component),b=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"tm-header"},r.a.createElement("div",{className:"row-reverse tm-header-inner"},r.a.createElement("div",{className:"col-md-6 col-12"},r.a.createElement("div",{className:"tm-site-text-box"},r.a.createElement("h1",{className:"tm-site-title"},"ConTip"),r.a.createElement("h6",{className:"tm-site-description"},"Content recommender for optimal free time experience"))),r.a.createElement("nav",{className:"col-md-6 col-12 tm-nav"},r.a.createElement("ul",{className:"tm-nav-ul"},r.a.createElement("li",{className:"tm-nav-li"},r.a.createElement("a",{href:"/",className:"tm-nav-link"},"Home")),r.a.createElement("li",{className:"tm-nav-li"},r.a.createElement("a",{href:"/profile/",className:"tm-nav-link"},"Profile")),r.a.createElement("li",{className:"tm-nav-li"},r.a.createElement("a",{href:"/search/",className:"tm-nav-link"},"Search")),r.a.createElement("li",{className:"tm-nav-li"},r.a.createElement("a",{href:"/watched/",className:"tm-nav-link"},"Watched")),r.a.createElement("li",{className:"tm-nav-li"},r.a.createElement("a",{href:"/login/",className:"tm-nav-link"},"Login"))))))}}]),a}(n.Component),v=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"wrapper",className:"container"},r.a.createElement(b,{history:this.props.history}),r.a.createElement(g,{history:this.props.history}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))}}],[{key:"propTypes",get:function(){return{history:d.a.any}}}]),a}(n.Component),E=a(13),w=a(12),y=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={data:[],loaded:!1,placeholder:"Loading"},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("jwt access"),a={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"JWT ".concat(t)}};fetch("http://localhost:8000/api/v1/account/users/me/",a).then((function(t){return console.log(t),t.status>400?e.setState((function(){return{placeholder:"Something went wrong!"}})):t.json()})).then((function(t){console.log(t),e.setState((function(){return{data:t,loaded:!0}}))}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Welcome, ",this.state.data.username,"!"),r.a.createElement("p",null,"Email: ",this.state.data.email))}}]),a}(n.Component),j=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{display:"inline-block"}},r.a.createElement("input",{id:this.props.id,type:"checkbox",name:this.props.name,checked:this.props.isSelected,onChange:this.props.onCheckboxChange}),r.a.createElement("label",{htmlFor:this.props.id},this.props.text))}}],[{key:"propTypes",get:function(){return{id:d.a.any,onCheckboxChange:d.a.any,name:d.a.any,isSelected:d.a.any,text:d.a.any}}}]),a}(n.Component),S=[],N=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handlePreferenceChange=function(e){var t=e.target.name;n.setState((function(e){return{preferences:Object(w.a)(Object(w.a)({},e.preferences),{},Object(E.a)({},t,!e.preferences[t]))}}))},n.handleEmailChange=function(e){n.setState({email:e.target.value})},n.handlePasswordChange=function(e){n.setState({password:e.target.value})},n.handleConfirmPasswordChange=function(e){n.setState({confirmPassword:e.target.value})},n.handleCurrentPasswordChange=function(e){n.setState({currentPassword:e.target.value})},n.handleDeletePasswordChange=function(e){n.setState({deletePassword:e.target.value})},n.handlePreferenceSubmit=function(e){e.preventDefault();var t=Object.keys(n.state.preferences).filter((function(e){return n.state.preferences[e]}));console.log("selectedPreferences: ".concat(t));var a=localStorage.getItem("jwt access"),r={method:"PUT",body:JSON.stringify({genre_preference:t}),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"JWT ".concat(a)}};fetch("http://localhost:8000/api/v1/app/preferences/set/",r).then((function(e){return console.log(e),200!=e.status?alert("Something went wrong"):(n.props.history.push("/profile/"),alert("Preferences changed successfully!")),e.json()}))},n.handleLogOutSubmit=function(e){e.preventDefault(),localStorage.removeItem("jwt access"),localStorage.removeItem("jwt refresh"),n.props.history.push("/login/")},n.handleEmailSubmit=function(e){e.preventDefault();var t=localStorage.getItem("jwt access"),a={method:"PATCH",body:JSON.stringify({email:n.state.email}),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"JWT ".concat(t)}};fetch("http://localhost:8000/api/v1/account/users/me/",a).then((function(e){return console.log(e),200!=e.status?alert("Something went wrong"):(n.props.history.push("/profile/"),alert("Email changed successfully!")),e.json()}))},n.handlePasswordSubmit=function(e){if(n.state.password==n.state.confirmPassword){e.preventDefault();var t=localStorage.getItem("jwt access"),a={method:"POST",body:JSON.stringify({new_password:n.state.password,re_new_password:n.state.confirmPassword,current_password:n.state.currentPassword}),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"JWT ".concat(t)}};fetch("http://localhost:8000/api/v1/account/users/set_password/",a).then((function(e){return console.log(e),204!=e.status?alert("Something went wrong"):n.props.history.push("/login/"),e.json()}))}else e.preventDefault(),alert("Passwords do not match!")},n.handleDeleteProfile=function(){alert("Profile deletion request submitted!");var e=localStorage.getItem("jwt access"),t={method:"DELETE",body:JSON.stringify({current_password:n.state.deletePassword}),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"JWT ".concat(e)}};fetch("http://localhost:8000/api/v1/account/users/me/",t).then((function(e){return console.log(e),204!=e.status?alert("Something went wrong"):n.props.history.push("/signup/"),e.json()}))},n.state={email:"",password:"",confirmPassword:"",deletePassword:"",data:[],loaded:!1,placeholder:"Loading",preferences:S.reduce((function(e,t){return Object(w.a)(Object(w.a)({},e),{},Object(E.a)({},t,!1))}),{})},n}return Object(m.a)(a,null,[{key:"propTypes",get:function(){return{history:d.a.any}}}]),Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("jwt access"),a={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"JWT ".concat(t)}};fetch("http://localhost:8000/api/v1/app/genre/list/",a).then((function(t){return console.log(t),t.status>400?(e.props.history.push("/login"),e.setState((function(){return{placeholder:"Something went wrong!"}}))):t.json()})).then((function(t){console.log(t),S=Array.from(t.map((function(e){return e.id}))),e.setState((function(){return{data:t,loaded:!0}}))})),fetch("http://localhost:8000/api/v1/app/preferences/set/",a).then((function(t){return console.log(t),t.status>400?e.setState((function(){return{placeholder:"Something went wrong!"}})):t.json()})).then((function(t){(t=t.genre_preference).forEach((function(t){e.setState((function(e){return{preferences:Object(w.a)(Object(w.a)({},e.preferences),{},Object(E.a)({},t,!e.preferences[t]))}}))}))}))}},{key:"render",value:function(){var e=this;return r.a.createElement("main",null,r.a.createElement("header",{className:"row tm-welcome-section"},r.a.createElement("h2",{className:"col-12 text-center tm-section-title"},"My Profile"),r.a.createElement("p",{className:"col-12 text-center"},"...where you can find or change info about your account.")),r.a.createElement("div",{className:"tm-section"},r.a.createElement(y,null),r.a.createElement("h2",null,"Change Profile",r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("h3",null,"Change Favorite Genres",r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("form",{onSubmit:this.handlePreferenceSubmit,method:"POST"},this.state.data.map((function(t){var a="genre"+t.id;return r.a.createElement(j,{key:t.id,id:a,name:t.id,text:t.name,isSelected:e.state.preferences[t.id],onCheckboxChange:e.handlePreferenceChange.bind(e)})})),r.a.createElement("button",{type:"submit",className:"tm-btn"},"Change")),r.a.createElement("h3",null,"Change Email",r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("form",{onSubmit:this.handleEmailSubmit,method:"POST"},r.a.createElement("input",{type:"email",value:this.state.email,onChange:this.handleEmailChange,name:"email",className:"form-control",placeholder:"New Email"}),r.a.createElement("button",{type:"submit",className:"tm-btn"},"Change")),r.a.createElement("h3",null,"Change Password",r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("form",{onSubmit:this.handlePasswordSubmit,method:"POST"},r.a.createElement("input",{type:"password",value:this.state.password,onChange:this.handlePasswordChange,name:"password",className:"form-control",placeholder:"New Password"}),r.a.createElement("input",{type:"password",value:this.state.confirmPassword,onChange:this.handleConfirmPasswordChange,name:"re_password",className:"form-control",placeholder:"Confirm New Password"}),r.a.createElement("button",{type:"submit",className:"tm-btn"},"Change")),r.a.createElement("h3",null,"Delete Account",r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("form",{onSubmit:this.handleDeleteProfile,method:"POST"},r.a.createElement("input",{type:"password",value:this.state.deletePassword,onChange:this.handleDeletePasswordChange,name:"del_password",className:"form-control",placeholder:"Password"}),r.a.createElement("button",{type:"submit",className:"tm-btn"},"Delete Account")),r.a.createElement("h3",null,"Log Out",r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("form",{onSubmit:this.handleLogOutSubmit},r.a.createElement("button",{type:"submit",className:"tm-btn"},"Log Out"))))}}]),a}(n.Component),O=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"wrapper",className:"container"},r.a.createElement(b,null),r.a.createElement(N,{history:this.props.history}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))}}],[{key:"propTypes",get:function(){return{history:d.a.any}}}]),a}(n.Component),C=a(14),T=a.n(C),_=a(19),k=a(16),P=function(e){var t=function(t){e.onSubmit(t)};return"DeleteProfileButton"===e.id?r.a.createElement("div",{className:"col-6 col-12-medium"},r.a.createElement("ul",{className:"actions stacked"},r.a.createElement("li",{id:e.id},r.a.createElement("a",{href:"#",className:"button small fit",onClick:t},e.buttonName)))):r.a.createElement("button",{type:"submit",value:"Submit",className:"tm-btn",onClick:t},e.buttonName)},A=function(e){return r.a.createElement(P,{id:e.id,className:e.className?e.className:"",buttonName:e.buttonName,onSubmit:e.onSubmit})},x=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(t){if(isNaN(e.props.movie_rating))t.preventDefault();else if(+e.props.movie_rating>100||+e.props.movie_rating<0)t.preventDefault();else{t.preventDefault();var a=localStorage.getItem("jwt access"),n={method:"POST",body:JSON.stringify({film:e.props.film_id,value:e.props.movie_rating}),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"JWT ".concat(a)}};fetch("http://yyr3ll.pythonanywhere.com/api/v1/app/rating/create/",n).then((function(e){return console.log(e),e.json()}))}},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(A,{buttonName:"Rate",onSubmit:this.handleClick,className:this.props.className})}}]),a}(n.Component),D=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleRatingChange=function(e){n.setState({movie_rating:e.target.value})},n.state={movie_rating:"",tmdb:[],loaded_tmdb:!1},n}return Object(m.a)(a,[{key:"loadTMDB",value:function(){var e=this,t=localStorage.getItem("jwt access"),a={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"JWT ".concat(t)}};fetch("https://api.themoviedb.org/3/movie/".concat(this.props.tmdb,"?api_key=18c2fd7db94f9e4300a4700ea19affb9"),a).then((function(t){return console.log(t),t.status>400?e.setState((function(){return{placeholder:"Something went wrong!"}})):t.json()})).then((function(t){console.log(t),e.setState((function(){return{tmdb:t,loaded_tmdb:!0}}))}))}},{key:"render",value:function(){var e=r.a.createElement("span",null);return this.state.loaded_tmdb?(e=this.state.tmdb.overview,r.a.createElement("article",{id:"film square",className:"title-card"},r.a.createElement("div",{className:"col-xs-4"},r.a.createElement("div",{className:"watchlist-row"},r.a.createElement("a",{className:"no-border-btm",href:this.props.link},r.a.createElement("div",{className:"title-poster no-radius-right"},r.a.createElement("img",{width:"300",height:"450",className:"title-poster-img",src:"https://image.tmdb.org/t/p/w600_and_h900_bestv2"+this.state.tmdb.poster_path,alt:this.props.title}))))),r.a.createElement("div",{className:"col-xs-8 title-card-content"},r.a.createElement("h4",{className:"tm-gallery-title"},r.a.createElement("a",{className:"no-border-btm",href:this.props.link},this.props.title)),r.a.createElement("p",{className:"tm-gallery-description"},e),r.a.createElement("div",{className:"title-card-content-bottom"},r.a.createElement("div",{id:"text-input-field",className:"col-6 col-12-xsmall rating-input-field"},r.a.createElement("input",{type:"text",className:"form-control",name:"rating".concat(this.props.film_id),id:"rating".concat(this.props.film_id),value:this.state.movie_rating,onChange:this.handleRatingChange,placeholder:"0-100 points"})),r.a.createElement(x,{film_id:this.props.film_id,movie_rating:this.state.movie_rating,className:"rating-button"}))))):(this.loadTMDB(),null)}}]),a}(n.Component),I=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).get_films=function(){var e=Object(k.a)(T.a.mark((function e(t,a){var n,r,o,s,l,c,i,m,h,u;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=[],l=Object(_.a)(t.watched_list);try{for(l.s();!(c=l.n()).done;)i=c.value,n.push(fetch("http://localhost:8000/api/v1/app/film/detail/".concat(i,"/"),a)),console.log(i)}catch(p){l.e(p)}finally{l.f()}return e.prev=4,e.next=7,Promise.all(n);case 7:o=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log(e.t0);case 13:m=Object(_.a)(o);try{for(m.s();!(h=m.n()).done;)u=h.value,r.push(u.json())}catch(p){m.e(p)}finally{m.f()}return e.prev=16,e.next=19,Promise.all(r);case 19:s=e.sent,e.next=25;break;case 22:e.prev=22,e.t1=e.catch(16),console.log(e.t1);case 25:return e.abrupt("return",s);case 27:case"end":return e.stop()}}),e,null,[[4,10],[16,22]])})));return function(t,a){return e.apply(this,arguments)}}(),n.state={data:[],loaded:!1,placeholder:"Loading"},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(k.a)(T.a.mark((function e(){var t,a,n,r,o;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("jwt access"),a={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"JWT ".concat(t)}},e.next=4,fetch("http://localhost:8000/api/v1/app/watched/set/",a);case 4:if(401!==(n=e.sent).status){e.next=8;break}return this.props.history.push("/login"),e.abrupt("return",this.setState((function(){return{placeholder:"Something went wrong!"}})));case 8:return e.next=10,n.json();case 10:return r=e.sent,e.next=13,this.get_films(r,a);case 13:o=e.sent,this.setState((function(){return{data:o,loaded:!0}}));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=0,t=r.a.createElement("p",null);return this.state&&"undefined"!=typeof this.state.data&&this.state.data.length>0&&(t=this.state.data.map((function(t){if(e<12)return e++,r.a.createElement(D,{film_id:t.id,tmdb:t.tmdb,link:"/film/".concat(t.id),title:t.title,desc:"GET DESCRIPTION FROM IMDB",genre:t.genre.map((function(e){return e.name+"  "}))})}))),r.a.createElement("main",null,r.a.createElement("header",{className:"row tm-welcome-section"},r.a.createElement("h2",{className:"col-12 text-center tm-section-title"},"Watched Movies"),r.a.createElement("p",{className:"col-12 text-center"},"...where you can find a list of all the movies you have already watched.")),r.a.createElement("div",{className:"tm-section"},t))}}]),a}(n.Component),W=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(b,null),r.a.createElement(I,{history:this.props.history}))}}]),a}(n.Component),J=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleAddToWatched=function(e){var t=localStorage.getItem("jwt access"),a={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"JWT ".concat(t)}};fetch("http://localhost:8000/api/v1/app/watched/set/",a).then((function(e){return e.status>400?(n.props.history.push("/login/"),n.setState((function(){return{placeholder:"Something went wrong!"}}))):e.json()})).then((function(e){e.watched_list.push(n.state.data.id),n.setState({watched_films:e.watched_list}),console.log("Modified list (for DEBUG ) "+n.state.watched_films);var a={method:"PUT",body:JSON.stringify({watched_list:e.watched_list}),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"JWT ".concat(t)}};fetch("http://localhost:8000/api/v1/app/watched/set/",a).then((function(e){return console.log(e),n.isInWatched(),e.json()}))}))},n.handleDeleteFromWatched=function(e){var t=localStorage.getItem("jwt access"),a={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"JWT ".concat(t)}};fetch("http://localhost:8000/api/v1/app/watched/set/",a).then((function(e){return e.status>400?(n.props.history.push("/login/"),n.setState((function(){return{placeholder:"Something went wrong!"}}))):e.json()})).then((function(e){var a=e.watched_list.indexOf(n.state.data.id);~a&&e.watched_list.splice(a,1),n.setState({watched_films:e.watched_list}),console.log("Modified list (for DEBUG ) "+n.state.watched_films);var r={method:"PUT",body:JSON.stringify({watched_list:e.watched_list}),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"JWT ".concat(t)}};fetch("http://localhost:8000/api/v1/app/watched/set/",r).then((function(e){return console.log(e),n.isInWatched(),e.json()}))}))},n.isInWatched=function(){var e=localStorage.getItem("jwt access"),t={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"JWT ".concat(e)}};fetch("http://localhost:8000/api/v1/app/watched/set/",t).then((function(e){return e.status>400?(n.props.history.push("/login/"),n.setState((function(){return{placeholder:"Something went wrong!"}}))):e.json()})).then((function(e){var t=Boolean(e.watched_list.find((function(e){return e==n.state.data.id})));n.setState({isInWatched:t})}))},n.state={data:[],tmdb:[],loaded:!1,loaded_tmdb:!1,placeholder:"Loading",watched_films:[],isInWatched:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("jwt access"),a={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"JWT ".concat(t)}};fetch("http://localhost:8000/api/v1/app/film/detail/".concat(this.props.match.params.id),a).then((function(t){return console.log(t),t.status>400?e.setState((function(){return{placeholder:"Something went wrong!"}})):t.json()})).then((function(t){console.log(t),e.isInWatched(),e.setState((function(){return{data:t,loaded:!0}}))}))}},{key:"loadTMDB",value:function(){var e=this,t=localStorage.getItem("jwt access"),a={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"JWT ".concat(t)}};fetch("https://api.themoviedb.org/3/movie/".concat(this.state.data.tmdb,"?api_key=18c2fd7db94f9e4300a4700ea19affb9"),a).then((function(t){return console.log(t),t.status>400?e.setState((function(){return{placeholder:"Something went wrong!"}})):t.json()})).then((function(t){console.log(t),e.setState((function(){return{tmdb:t,loaded_tmdb:!0}}))}))}},{key:"render",value:function(){var e=r.a.createElement("h1",null,"Film page");if(this.state&&this.state.loaded&&this.state.loaded_tmdb){var t=0,a=this.state.data.genre,n=(a.map((function(e){return(t+=1)===a.length?r.a.createElement("span",null,e.name):r.a.createElement("span",null,e.name,r.a.createElement("span",null,", "))})),"Add to watched"),o=this.handleAddToWatched;this.state.isInWatched&&(n="Remove from watched",o=this.handleDeleteFromWatched),e=r.a.createElement("div",{className:"tm-section"},r.a.createElement("div",{className:"col-sm-4 col-sm-pull-8"},r.a.createElement("div",{className:"title-sidebar"},r.a.createElement("aside",null,r.a.createElement("div",{className:"title-poster no-radius-btm"},r.a.createElement("img",{width:"300",height:"450",src:"https://image.tmdb.org/t/p/w600_and_h900_bestv2"+this.state.tmdb.poster_path,alt:this.state.data.title})))),r.a.createElement("div",{className:"title-sidebar-button no-radius-top"},r.a.createElement(A,{buttonName:n,onSubmit:o}))),r.a.createElement("h3",{className:"tm-movie-title"},this.state.data.title),r.a.createElement("h4",{className:"tm-gallery-title"},"Description"),r.a.createElement("p",{className:"tm-gallery-description"},this.state.tmdb.overview),r.a.createElement("h4",{className:"tm-gallery-title"},"Rating"),r.a.createElement("a",{className:"no-border-btm",href:"https://www.themoviedb.org/movie/".concat(this.state.data.tmdb)},r.a.createElement("p",{className:"tm-gallery-price"},this.state.tmdb.vote_average)),r.a.createElement("h4",{className:"tm-gallery-title"},"Release date"),r.a.createElement("p",{className:"tm-gallery-description"},this.state.tmdb.release_date),r.a.createElement("h4",{className:"tm-gallery-title"},"Runtime"),r.a.createElement("p",{className:"tm-gallery-description"},"".concat(this.state.tmdb.runtime," minutes")))}return this.state.loaded&&!this.state.loaded_tmdb&&this.loadTMDB(),r.a.createElement("div",{className:"container"},r.a.createElement(b,null),r.a.createElement("main",null,r.a.createElement("header",{className:"row tm-welcome-section"},r.a.createElement("h2",{className:"col-12 text-center tm-section-title"},"Movie Details"),r.a.createElement("p",{className:"col-12 text-center"},"...where you can find a detailed description of a particular film.")),e))}}]),a}(n.Component),M=a(8),z=Object(M.a)(),G=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={tmdb:[],loaded_tmdb:!1},n}return Object(m.a)(a,[{key:"getRandomInt",value:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}},{key:"loadTMDB",value:function(){var e=this,t=localStorage.getItem("jwt access"),a={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"JWT ".concat(t)}};fetch("https://api.themoviedb.org/3/movie/".concat(this.props.tmdb,"?api_key=18c2fd7db94f9e4300a4700ea19affb9"),a).then((function(t){return console.log(t),t.status>400?e.setState((function(){return{placeholder:"Something went wrong!"}})):t.json()})).then((function(t){console.log(t),e.setState((function(){return{tmdb:t,loaded_tmdb:!0}}))}))}},{key:"render",value:function(){var e=r.a.createElement("img",{src:"",alt:""});return this.state.loaded_tmdb&&(e=r.a.createElement("img",{src:"https://image.tmdb.org/t/p/w600_and_h900_bestv2"+this.state.tmdb.poster_path,alt:this.props.title,className:"img-fluid tm-gallery-img"})),this.state.loaded_tmdb||this.loadTMDB(),r.a.createElement("article",{className:"col-lg-3 col-md-4 col-sm-6 col-12 tm-gallery-item"},r.a.createElement("figure",null,r.a.createElement("a",{href:this.props.href},e),r.a.createElement("figcaption",null,r.a.createElement("h4",{className:"tm-gallery-title"},this.props.title),r.a.createElement("p",null," Genre: ",this.props.genre," "))))}}]),a}(n.Component),L=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={data:[],loaded:!1,placeholder:"Loading"},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("jwt access"),a={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"JWT ".concat(t)}};fetch("http://localhost:8000/api/v1/app/film/recommend/",a).then((function(t){return console.log(t),t.status>400?(e.props.history.push("/login/"),e.setState((function(){return{placeholder:"Something went wrong!"}}))):t.json()})).then((function(t){console.log(t),e.setState((function(){return{data:t,loaded:!0}}))}))}},{key:"render",value:function(){var e=r.a.createElement("p",null,r.a.createElement("strong",null,"Loading your recommendations... Hang on..."));return this.state.loaded&&"undefined"!=typeof this.state.data&&this.state.data.length>0?(e=this.state.data.map((function(e){return r.a.createElement(G,{href:"/film/".concat(e.id),title:e.title,key:e.title,tmdb:e.tmdb,image:"https://avatarfiles.alphacoders.com/139/139764.jpg",genre:e.genre.map((function(e){return e.name+"  "}))})})),r.a.createElement("div",{id:"tm-gallery-page-movies",className:"tm-gallery-page"},e)):r.a.createElement("div",{id:"tm-gallery-page-movies",className:"tm-gallery-page"},e)}}]),a}(n.Component),B=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(b,null),r.a.createElement("main",null,r.a.createElement("header",{className:"row tm-welcome-section"},r.a.createElement("h2",{className:"col-12 text-center tm-section-title"},"Specially For You..."),r.a.createElement("p",{className:"col-12 text-center"},"...we sat down and watched thousands of movies, just to find some special ones that you should definitely check out this week.")),r.a.createElement("div",{className:"row tm-gallery"},r.a.createElement(L,{history:this.props.history,key:"movieList"}))))}}]),a}(n.Component);var U=function(){return r.a.createElement(l.a,{history:z},r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"/login/",component:v}),r.a.createElement(c.a,{path:"/profile/",component:O}),r.a.createElement(c.a,{path:"/watched/",component:W}),r.a.createElement(c.a,{exact:!0,path:"/",component:B}),r.a.createElement(c.a,{path:"/film/:id",component:J})))};s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.3d916515.chunk.js.map